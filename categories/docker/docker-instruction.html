<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>docker-instruction</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit inherit; background-repeat: inherit inherit; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; background-position: 0px 0px; background-repeat: initial initial; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print { 
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid-page; break-before: avoid-page; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid-page; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background-color: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; background-position: initial initial; background-repeat: initial initial; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { white-space: pre !important; border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; text-shadow: initial !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; white-space: nowrap; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; border: none !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: 0px 0px; background-repeat: initial initial; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

 .typora-export li, .typora-export p, .typora-export,  .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-mac'><h1><a name='header-n0' class='md-header-anchor '></a>工欲善其事，必先利其器 - Docker 使用</h1><blockquote><p>本博客所有文章除特别声明外，均采用 CC BY-NC-SA 3.0 许可协议。转载请注明出处！</p></blockquote><figure><table><thead><tr><th style='text-align:center;' >版本</th><th style='text-align:center;' >作者</th><th style='text-align:center;' >博客</th></tr></thead><tbody><tr><td style='text-align:center;' >v1.1.0</td><td style='text-align:center;' ><font color=#0099ff>秦晓东<sup class='md-footnote'><a href='#dfref-footnote-1' name='ref-footnote-1'>1</a></sup></font></td><td style='text-align:center;' ><a href='https://jessexiaodong.github.io'>666nb.party</a></td></tr></tbody></table></figure><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" style="" href="#header-n0">工欲善其事，必先利其器 - Docker 使用</a></span><span class="md-toc-item md-toc-h2" data-ref="n15"><a class="md-toc-inner" style="" href="#header-n15">@简介</a></span><span class="md-toc-item md-toc-h3" data-ref="n16"><a class="md-toc-inner" style="" href="#header-n16">- Docker容器和虚拟机的比较</a></span><span class="md-toc-item md-toc-h3" data-ref="n43"><a class="md-toc-inner" style="" href="#header-n43">- Docker 的用途</a></span><span class="md-toc-item md-toc-h3" data-ref="n49"><a class="md-toc-inner" style="" href="#header-n49">- Docker引擎</a></span><span class="md-toc-item md-toc-h3" data-ref="n60"><a class="md-toc-inner" style="" href="#header-n60">- Docker构架</a></span><span class="md-toc-item md-toc-h3" data-ref="n75"><a class="md-toc-inner" style="" href="#header-n75">- Docker核心概念</a></span><span class="md-toc-item md-toc-h2" data-ref="n92"><a class="md-toc-inner" style="" href="#header-n92">@搭建说明</a></span><span class="md-toc-item md-toc-h3" data-ref="n93"><a class="md-toc-inner" style="" href="#header-n93">- Docker 版本</a></span><span class="md-toc-item md-toc-h3" data-ref="n110"><a class="md-toc-inner" style="" href="#header-n110">- Docker 安装</a></span><span class="md-toc-item md-toc-h3" data-ref="n129"><a class="md-toc-inner" style="" href="#header-n129">- Docker使用流程</a></span><span class="md-toc-item md-toc-h3" data-ref="n133"><a class="md-toc-inner" style="" href="#header-n133">- 创建镜像</a></span><span class="md-toc-item md-toc-h4" data-ref="n134"><a class="md-toc-inner" style="" href="#header-n134">1.docker pull 方式</a></span><span class="md-toc-item md-toc-h4" data-ref="n136"><a class="md-toc-inner" style="" href="#header-n136">2.Dockerfile 方式</a></span><span class="md-toc-item md-toc-h3" data-ref="n143"><a class="md-toc-inner" style="" href="#header-n143">- 设置镜像标签</a></span><span class="md-toc-item md-toc-h3" data-ref="n148"><a class="md-toc-inner" style="" href="#header-n148">- 更新镜像 (在容器中修改后，需要保存配置)</a></span><span class="md-toc-item md-toc-h3" data-ref="n161"><a class="md-toc-inner" style="" href="#header-n161">- 镜像命令 &amp;&amp; 仓库(repository)操作 </a></span><span class="md-toc-item md-toc-h3" data-ref="n236"><a class="md-toc-inner" style="" href="#header-n236">- 容器命令（docker ps 查看容器）</a></span><span class="md-toc-item md-toc-h3" data-ref="n422"><a class="md-toc-inner" style="" href="#header-n422">- Docker  网络管理</a></span><span class="md-toc-item md-toc-h3" data-ref="n438"><a class="md-toc-inner" style="" href="#header-n438">- Docker 容器通讯</a></span><span class="md-toc-item md-toc-h3" data-ref="n452"><a class="md-toc-inner" style="" href="#header-n452">- Docker Compose - 使用 docker-compose.yml 快速创建</a></span><span class="md-toc-item md-toc-h4" data-ref="n453"><a class="md-toc-inner" style="" href="#header-n453">说明</a></span><span class="md-toc-item md-toc-h4" data-ref="n455"><a class="md-toc-inner" style="" href="#header-n455">操作</a></span><span class="md-toc-item md-toc-h2" data-ref="n461"><a class="md-toc-inner" style="" href="#header-n461"> @实战</a></span><span class="md-toc-item md-toc-h3" data-ref="n462"><a class="md-toc-inner" style="" href="#header-n462">- Docker中配置PHP容器</a></span><span class="md-toc-item md-toc-h4" data-ref="n463"><a class="md-toc-inner" style="" href="#header-n463">安装镜像</a></span><span class="md-toc-item md-toc-h4" data-ref="n478"><a class="md-toc-inner" style="" href="#header-n478">使用php镜像创建容器</a></span><span class="md-toc-item md-toc-h3" data-ref="n483"><a class="md-toc-inner" style="" href="#header-n483">-  Docker中配置Nginx容器</a></span><span class="md-toc-item md-toc-h4" data-ref="n484"><a class="md-toc-inner" style="" href="#header-n484">安装镜像</a></span><span class="md-toc-item md-toc-h4" data-ref="n486"><a class="md-toc-inner" style="" href="#header-n486">宿主机上文件结构</a></span><span class="md-toc-item md-toc-h4" data-ref="n495"><a class="md-toc-inner" style="" href="#header-n495">将主机的配置 挂载到 容器中</a></span><span class="md-toc-item md-toc-h4" data-ref="n499"><a class="md-toc-inner" style="" href="#header-n499">客户端访问流程</a></span><span class="md-toc-item md-toc-h3" data-ref="n505"><a class="md-toc-inner" style="" href="#header-n505">- Docker Compose  快速创建WordPress</a></span><span class="md-toc-item md-toc-h2" data-ref="n528"><a class="md-toc-inner" style="" href="#header-n528">@总结</a></span></p></div><hr /><h2><a name='header-n15' class='md-header-anchor '></a><font color=#0099ff>@简介</font></h2><h3><a name='header-n16' class='md-header-anchor '></a>- Docker容器和虚拟机的比较</h3><blockquote><p>主要区别：容器虚拟化操作系统，而不是硬件</p></blockquote><p><img src='https://jessexiaodong.github.io//images/docker/docker-containerized.png' alt='容器' referrerPolicy='no-referrer' /></p><p><img src='https://jessexiaodong.github.io/images/docker/container-vm-whatcontainer.png' alt='虚拟机' referrerPolicy='no-referrer' /></p><ul><li>更快速的交付和部署</li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker在整个开发周期都可以完美的辅助你实现快速交付。Docker允许开发者在装有应用和服务本地容器做开发。可以直接集成到可持续开发流程中。</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">例如：开发者可以使用一个标准的镜像来构建一套开发容器，开发完成之后，运维人员可以直接使用这个容器来部署代码。</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre><ul><li>高效的部署和扩容</li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker 容器几乎可以在任意的平台上运行，包括物理机、虚拟机、公有云、私有云、个人电脑、服务器等。 这种兼容性可以让用户把一个应用程序从一个平台直接迁移到另外一个。</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker的兼容性和轻量特性可以很轻松的实现负载的动态管理。你可以快速扩容或方便的下线的你的应用和服务，这种速度趋近实时。</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre><ul><li>更高的资源利用率</li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker 对系统资源的利用率很高，一台主机上可以同时运行数千个 Docker 容器。容器除了运行其中应用外，基本不消耗额外的系统资源，使得应用的性能很高，同时系统的开销尽量小。传统虚拟机方式运行 10 个不同的应用就要起 10 个虚拟机，而Docker 只需要启动 10 个隔离的应用即可。</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><ul><li>更简单的管理</li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">使用 Docker，只需要小小的修改，就可以替代以往大量的更新工作。所有的修改都以增量的方式被分发和更新，从而实现自动化并且高效的管理。</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre><ul><li>快速，毫秒启动</li><li>隔离，沙盒技术更像虚拟机</li></ul><hr /><h3><a name='header-n43' class='md-header-anchor '></a>- Docker 的用途</h3><p>Docker 的主要用途，目前有三大类。</p><p><strong>（1）提供一次性的环境。</strong>比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。</p><p><strong>（2）提供弹性的云服务。</strong>因为 Docker 容器可以随开随关，很适合动态扩容和缩容。</p><p><strong>（3）组建微服务架构。</strong>通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构。</p><hr /><h3><a name='header-n49' class='md-header-anchor '></a>- Docker引擎</h3><p>docker引擎是一个c/s结构的应用，主要组件见下图：</p><p><img src='https://jessexiaodong.github.io/images/docker/engine-components-flow.png' alt='docker engine components flow' referrerPolicy='no-referrer' /></p><ul><li>Server是一个常驻进程</li><li>REST API 实现了client和server间的交互协议</li><li>CLI 实现容器和镜像的管理，为用户提供统一的操作界面</li></ul><hr /><h3><a name='header-n60' class='md-header-anchor '></a>- Docker构架</h3><p>Docker 使用客户端-服务器 (C/S) 架构模式，Client 通过API与Server进程通信实现容器的构建，运行和发布。client和server可以运行在同一台集群，也可以通过跨主机实现远程通信。</p><blockquote><p>docker 容器通过 Docker 镜像来创建，并且这个模版还是分层的。</p></blockquote><ul><li><strong>docker Client</strong>客户端————&gt;向docker服务器进程发起请求，如:创建、停止、销毁容器等操作</li><li><strong>docker Server</strong>服务器进程—–&gt;处理所有docker的请求，管理所有容器</li><li><strong>docker Registry</strong>镜像仓库——&gt;镜像存放的中央仓库，可看作是存放二进制的scm</li></ul><p>&nbsp;</p><p><img src='https://jessexiaodong.github.io/images/docker/architecture.jpg' alt='docker architecture' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><h3><a name='header-n75' class='md-header-anchor '></a>- Docker核心概念</h3><p>容器(children)与镜像(father)的关系类似于面向对象编程中的对象与类。</p><p>1.镜像(只读层)</p><p><img src='https://jessexiaodong.github.io/images/docker/images.png' alt='docker architecture' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker 镜像（Image）就是一堆只读层（read-only layer）的统一视角。</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">例如：一个镜像可以包含一个完整的操作系统环境，里面仅安装了 nginx 或用户需要的其它应用程序。镜像可以用来创建 Docker 容器，一个镜像可以创建很多容器。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-----</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker 镜像是由多个文件系统（只读层）叠加而成，每个层仅包含了前一层的差异部分。</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre><ul><li>用于创建Docker容器的模板- 类</li></ul><p>2.容器 (容器 = 镜像 + 读写层)</p><p><img src='https://jessexiaodong.github.io/images/docker/container_1.png' alt='docker architecture' referrerPolicy='no-referrer' /></p><p><img src='https://jessexiaodong.github.io/images/docker/container_2.png' alt='docker architecture' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker 利用容器（Container）来运行应用。容器是从镜像创建的运行实例。它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证安全的平台。可以把容器看做是一个简易版的 Linux 环境（包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">容器的定义和镜像几乎一模一样，也是一堆层的统一视角，唯一区别在于容器的最上面那一层是可读可写的。</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre><ul><li>独立的运行的一个应用 - 对象</li></ul><h2><a name='header-n92' class='md-header-anchor '></a><font color=#0099ff>@搭建说明</font></h2><h3><a name='header-n93' class='md-header-anchor '></a>- Docker 版本</h3><ul><li><p>CE  （Community Edition）</p><ul><li>Edge  (每个月发布一次)</li><li>Stable （每个季度发布一次，稳定版）, 维护期四个月</li></ul></li><li><p>EE （Enterprise Edition）（Docker EE和stable版本的版本号保持一致），维护期1年</p><p>&nbsp;</p></li></ul><p><img src='https://jessexiaodong.github.io/images/docker/docker-version.png' alt='docker version' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p><strong>区别</strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Docker从17.03开始分为企业版与社区版，社区版并非阉割版，而是改了个名称；企业版则提供了一些收费的高级特性。</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><hr /><h3><a name='header-n110' class='md-header-anchor '></a>- Docker 安装</h3><ul><li><p>Windows</p><ul><li><a href='https://docs.docker.com/docker-for-windows/' target='_blank' class='url'>https://docs.docker.com/docker-for-windows/</a></li></ul></li><li><p>linux</p><ul><li>centos 7 以上  | yum install -y docker-engine</li></ul></li><li><p>mac</p><ul><li><p><a href='https://docs.docker.com/docker-for-mac/' target='_blank' class='url'>https://docs.docker.com/docker-for-mac/</a></p><p>&nbsp;</p></li></ul></li></ul><hr /><h3><a name='header-n129' class='md-header-anchor '></a>- Docker使用流程</h3><p>&nbsp;</p><p><img src='https://jessexiaodong.github.io/images/docker/docker-flow.png' alt='docker architecture' referrerPolicy='no-referrer' /></p><hr /><h3><a name='header-n133' class='md-header-anchor '></a>- 创建镜像</h3><h4><a name='header-n134' class='md-header-anchor '></a>1.docker pull 方式</h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">docker pull nginx</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><h4><a name='header-n136' class='md-header-anchor '></a>2.Dockerfile 方式</h4><p><strong>Dockerfile文件内容</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n138" mdtype="fences">FROM php:7.2-fpm
MAINTAINER qxd
#设置时区
ENV TZ=Asia/Shanghai
RUN apt-get update
</pre><p><strong>解释</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n140" mdtype="fences">- 使用#来注释
- FROM 指令告诉 Docker 使用哪个镜像作为基础
- 接着是维护者的信息
- RUN开头的指令会在创建中运行，比如安装一个软件包
</pre><p><strong>宿主机上文件结构</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n142" mdtype="fences">    ├── php-fpm7.2
    │&nbsp;&nbsp; ├── Dockerfile
    │&nbsp;&nbsp; ├── Dockerfile.back
    │&nbsp;&nbsp; ├── conf.d
    │&nbsp;&nbsp; ├── docker-php-entrypoint
    │&nbsp;&nbsp; ├── docker-php-ext-configure
    │&nbsp;&nbsp; ├── docker-php-ext-enable
    │&nbsp;&nbsp; ├── docker-php-ext-install
    │&nbsp;&nbsp; └── docker-php-source
</pre><h3><a name='header-n143' class='md-header-anchor '></a>- 设置镜像标签</h3><p>我们可以使用 docker tag 命令，为镜像添加一个新的标签。</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n145" mdtype="fences">jesse@jessedeMacBook-Pro:~$docker tag 794195742b30 qxd:v3

docker tag 镜像ID，这里是 794195742b30 ,用户名称、镜像源名(repository name)和新的标签名(tag)。

使用 docker images 命令可以看到，ID为 794195742b30 的镜像多一个标签。

jesse@jessedeMacBook-Pro:~$docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
qxd                 v3                  794195742b30        26 minutes ago      109MB
nginx               latest              7042885a156a        3 weeks ago         109MB
</pre><p>&nbsp;</p><hr /><h3><a name='header-n148' class='md-header-anchor '></a>- 更新镜像 (在容器中修改后，需要保存配置)</h3><blockquote><p>方法</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n150" mdtype="fences">我们需要使用镜像来创建一个容器,在容器中配置新的功能
</pre><ul><li>新启动的容器</li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n155" mdtype="fences" style="page-break-inside: unset;">jesse@jessedeMacBook-Pro:~$ docker run -t -i nginx:latest /bin/bash
root@85d32912864b:/# ls
bin  boot  dev	etc  home  lib	lib64  media  mnt  opt	proc  root  run  sbin  srv  sys  tmp  usr  var
root@85d32912864b:/# mkdir qxd
root@85d32912864b:/# exit
# 在运行的容器内 创建 /qxd 目录。
在完成操作之后，输入 exit命令来退出这个容器。

**exit 后 docker ps 看不到容器（看到正在运行的容器），使用docker ps -a 即可看到容器id**

此时ID为 85d32912864b 的容器，是按我们的需求更改的容器。我们可以通过命令 docker commit来提交容器副本。

runoob@runoob:~$ docker commit -m="has update" -a="qxd" 85d32912864b qxd:v2
sha256:70bf1840fd7c0d2d8ef0a42a817eb29f854c1af8f7c59fc03ac7bdee9545aff8
各个参数说明：

-m:提交的描述信息

-a:指定镜像作者

85d32912864b：容器ID

qxd:v2:指定要创建的目标镜像名

我们可以使用 docker images 命令来查看我们的新镜像 qxd:v2：

jesse@jessedeMacBook-Pro:~$docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
qxd                 v2                  794195742b30        16 seconds ago      109MB
nginx               latest              7042885a156a        3 weeks ago         109MB

使用我们的新镜像 qxd 来启动一个容器

jesse@jessedeMacBook-Pro:~$docker run -t -i qxd:v2 /bin/bash
root@33b570b7a362:/# ls
bin  boot  dev	etc  home  lib	lib64  media  mnt  opt	proc  qxd  root  run  sbin  srv  sys  tmp  usr	var
</pre><ul><li>已经启动的容器中更新镜像 </li></ul><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n158" mdtype="fences">docker exec -it （容器id） /bin/bash
</pre><hr /><h3><a name='header-n161' class='md-header-anchor '></a>- 镜像命令 &amp;&amp; 仓库(repository)操作 </h3><blockquote><p>docker 镜像的tag 默认为latest</p></blockquote><p><strong>仓库</strong></p><blockquote><p>docker - <a href='https://hub.docker.com' target='_blank' class='url'>https://hub.docker.com</a></p></blockquote><ul><li>user </li><li>passwd</li></ul><figure><table><thead><tr><th style='text-align:center;' >command</th><th style='text-align:center;' >param</th><th>instruction</th></tr></thead><tbody><tr><td style='text-align:center;' >docker login</td><td style='text-align:center;' >&nbsp;</td><td>登录到一个registry</td></tr><tr><td style='text-align:center;' >docker search</td><td style='text-align:center;' >&nbsp;</td><td>从registry仓库搜索镜像</td></tr><tr><td style='text-align:center;' >docker pull</td><td style='text-align:center;' >&nbsp;</td><td>从仓库下载镜像到本地</td></tr><tr><td style='text-align:center;' >docker images</td><td style='text-align:center;' >&nbsp;</td><td>本地主机上的镜像</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-a</td><td>命令列出了所有的镜像</td></tr><tr><td style='text-align:center;' >docker inspect <image-id></td><td style='text-align:center;' >&nbsp;</td><td>查看镜像的详细信息</td></tr><tr><td style='text-align:center;' >docker rmi  -f <image-id></td><td style='text-align:center;' >&nbsp;</td><td>删除（强制） 镜像（需先删除有关的容器）</td></tr><tr><td style='text-align:center;' >docker commit</td><td style='text-align:center;' >&nbsp;</td><td>创建 &amp; 保存    镜像</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-m</td><td>提交的描述信息</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-a</td><td>指定镜像作者</td></tr><tr><td style='text-align:center;' >docker tag （<image-id>（REPOSITORY:TAG）</td><td style='text-align:center;' >&nbsp;</td><td>设置镜像标签</td></tr><tr><td style='text-align:center;' >docker push [username]/[repository]:[tag]</td><td style='text-align:center;' >（jesse37/python:django）</td><td>将一个镜像push到registry仓库中</td></tr><tr><td style='text-align:center;' >docker save <image-id></td><td style='text-align:center;' >&nbsp;</td><td>命令会创建一个镜像的压缩文件，这个文件能够在另外一个主机的Docker上使用。和export命令不同，这个命令为每一个层都保存了它们的元数据。这个命令只能对镜像生效。</td></tr><tr><td style='text-align:center;' >docker history <image-id></td><td style='text-align:center;' >&nbsp;</td><td>命令递归地输出指定镜像的历史镜像</td></tr></tbody></table></figure><p>&nbsp;</p><hr /><p>&nbsp;</p><h3><a name='header-n236' class='md-header-anchor '></a>- 容器命令（docker ps 查看容器）</h3><figure><table><thead><tr><th style='text-align:center;' >category</th><th style='text-align:center;' >command</th><th style='text-align:center;' >param</th><th style='text-align:center;' >instruction</th></tr></thead><tbody><tr><td style='text-align:center;' >容器相关操作</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker start <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >启动 容器</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker  rm <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >删除 容器</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker kill <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >发送信号给容器，默认SIGKILL</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker restart <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >重启 容器</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker container ls --all</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >列出本机所有容器，包括终止运行的容器</td></tr><tr><td style='text-align:center;' >执行</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker  exec -it <container-id> /bin/bash</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >用于进入一个正在运行的 docker 容器</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker run -i -t  <image-id> /bin/bash</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >创建并启动一个容器</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-i</td><td style='text-align:center;' >以交互模式运行容器，通常与 -t 同时使用；</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-t</td><td style='text-align:center;' >为容器重新分配一个伪输入终端，通常与 -i 同时使用；</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-d</td><td style='text-align:center;' >后台运行容器，并返回容器ID</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-p</td><td style='text-align:center;' >端口映射，格式为：<strong>主机(宿主)端口:容器端口</strong></td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-v</td><td style='text-align:center;' >挂载文件</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >--network</td><td style='text-align:center;' >为容器指定网络</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >--ip</td><td style='text-align:center;' >为容器指定一个ip</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >--dns</td><td style='text-align:center;' >指定容器使用的DNS服务器，默认和宿主一致</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >--link</td><td style='text-align:center;' >添加链接到另一个容器</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >--expose</td><td style='text-align:center;' >开放一个端口或一组端口</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >--name</td><td style='text-align:center;' >为容器指定一个名称</td></tr><tr><td style='text-align:center;' >文件导出导入</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker cp 容器id：容器里面的路径      宿主机的相应路径</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >从容器中copy文件到宿主机</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker cp 宿主机器文件路径 容器id：容器里面对应的路径</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >从宿主机copy文件到容器</td></tr><tr><td style='text-align:center;' >容器导出导入</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker export <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >创建一个tar文件，并且移除了元数据和不必要的层，将多个层整合成了一个层，只保存了当前统一视角看到<br/>的内容。</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker import <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' >获取容器相关信息</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker top <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >查看 容器 进程</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker port <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >端口</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker logs <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >查看 容器 日志</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker ps</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >在运行的容器</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >-a</td><td style='text-align:center;' >显示所有容器,包括运行中（Up）的和退出的(Exited)</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker inspect <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >查看详细信息包括grep &#39;&quot;IPAddress&quot;&#39;</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker diff <container-id></td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >显示容器文件系统的前后变化</td></tr><tr><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >docker events</td><td style='text-align:center;' >&nbsp;</td><td style='text-align:center;' >得到docker服务器的实时的事件</td></tr></tbody></table></figure><p><strong>copy 文件详细说明</strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">将宿主机/www/runoob目录拷贝到容器96f7f14e99ab的/www目录下。</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">docker <span class="cm-builtin">cp</span> /www/runoob 96f7f14e99ab:/www/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">将宿主机/www/runoob目录拷贝到容器96f7f14e99ab中，目录重命名为www。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">docker <span class="cm-builtin">cp</span> /www/runoob 96f7f14e99ab:/www</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">将容器96f7f14e99ab的/www目录拷贝到宿主机的/tmp目录中。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">docker <span class="cm-builtin">cp</span>  96f7f14e99ab:/www /tmp/</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 176px;"></div><div class="CodeMirror-gutters" style="display: none; height: 176px;"></div></div></div></pre><p>&nbsp;</p><hr /><h3><a name='header-n422' class='md-header-anchor '></a>- Docker  网络管理</h3><figure><table><thead><tr><th style='text-align:center;' >command</th><th style='text-align:center;' >instruction</th></tr></thead><tbody><tr><td style='text-align:center;' >docker network ls</td><td style='text-align:center;' >查看网络</td></tr><tr><td style='text-align:center;' >docker network create --subnet=172.17.0.0/16 mynetwork</td><td style='text-align:center;' >创建名为mynetwork的局域网</td></tr><tr><td style='text-align:center;' >docker run -d  --networker mynetwork --ip 172.17.0.3</td><td style='text-align:center;' >配置容器运行的网络</td></tr></tbody></table></figure><p>&nbsp;</p><hr /><h3><a name='header-n438' class='md-header-anchor '></a>- Docker 容器通讯</h3><ul><li><p>与宿主机之间通讯</p><ul><li>端口映射</li></ul></li><li><p>容器之间通讯</p><ul><li>docker 内网</li></ul></li></ul><hr /><h3><a name='header-n452' class='md-header-anchor '></a>- Docker Compose - 使用 docker-compose.yml 快速创建</h3><h4><a name='header-n453' class='md-header-anchor '></a>说明</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n454" mdtype="fences">Compose 是 Docker 容器进行编排的工具，定义和运行多容器的应用，可以一条命令启动多个容器
</pre><h4><a name='header-n455' class='md-header-anchor '></a>操作</h4><ul><li>docker-compose.yml 定义组成应用的各服务</li><li>docker-compose up 启动整个应用</li></ul><h2><a name='header-n461' class='md-header-anchor '></a><font color=#0099ff> @实战</font></h2><h3><a name='header-n462' class='md-header-anchor '></a>- Docker中配置PHP容器</h3><h4><a name='header-n463' class='md-header-anchor '></a>安装镜像</h4><ul><li><p>先到hub.docker.com  中 search php 找到对应的tag  有以下两种安装方式</p><ul><li>1.直接docker pull 安装 | docker pull php:7.2-fpm</li><li>2.在github中找到对应Dockerfile(或者自己创建)，通过docker build 创建</li></ul></li></ul><blockquote><p>下面使用自己创建的Dockerfile 文件</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">FROM php:7.2-fpm</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">MAINTAINER qxd</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置时区</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ENV <span class="cm-def">TZ</span><span class="cm-operator">=</span>Asia/Shanghai</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">RUN apt-get update</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre><blockquote><p>安装镜像</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">docker build <span class="cm-attribute">-t</span> php7.2:v1 .</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><h4><a name='header-n478' class='md-header-anchor '></a>使用php镜像创建容器</h4><blockquote><p>运行容器(挂载对应的文件，需要在容器中创建)</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">jesse@jessedeMacBook-Pro: docker run <span class="cm-attribute">-p</span> <span class="cm-number">127</span>.0.0.1:9000:9000 &nbsp;<span class="cm-attribute">--network</span> mynetwork <span class="cm-attribute">--ip</span> <span class="cm-number">172</span>.18.0.3 <span class="cm-attribute">--name</span>  myphp-fpm <span class="cm-attribute">-v</span> ~/docker/nginx/www:/www <span class="cm-attribute">-v</span> ~/docker/php/php-fpm7.2/conf.d:/usr/local/etc/php/conf.d <span class="cm-attribute">-v</span> ~/docker/php/php-fpm7.2/logs:/phplogs &nbsp; <span class="cm-attribute">-d</span> php7.2:v1</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre><p>&nbsp;</p><h3><a name='header-n483' class='md-header-anchor '></a>-  Docker中配置Nginx容器</h3><h4><a name='header-n484' class='md-header-anchor '></a>安装镜像</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n485" mdtype="fences">git pull nginx
</pre><h4><a name='header-n486' class='md-header-anchor '></a>宿主机上文件结构</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n487" mdtype="fences">在宿主机上创建挂载到容器中文件

── nginx
│   ├── conf.d
│   │   ├── default.conf
│   │   └── qxd_cn.conf
│   ├── logs
│   │   └── qxd_cn.log
│   └── www
│       ├── index.php
│       └── test.html

</pre><p><strong>qxd_cn.conf文件内容</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n489" mdtype="fences" style="page-break-inside: unset;">server {
    listen       80;
    server_name  qxd.cn;
    root   /www;
    index  index.html index.htm index.php;

    #charset koi8-r;
    access_log  /wwwlogs/qxd_cn.log  main;

    location / {
         try_files $uri $uri/  /index.php?$query_string;
    }

    error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 9000
    # 172.18.0.3 php容器的ip
    location ~ \.php$ {
        fastcgi_pass   172.18.0.3:9000;
        fastcgi_index  index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
}
</pre><p><strong>test.html文件内容</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n491" mdtype="fences">qxd qxd
</pre><p><strong>index.php文件内容</strong></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n493" mdtype="fences">&lt;?php
echo phpinfo();
</pre><h4><a name='header-n495' class='md-header-anchor '></a>将主机的配置 挂载到 容器中</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="shell" contenteditable="false" cid="n496" mdtype="fences" style="page-break-inside: unset;">jesse@jessedeMacBook-Pro:~/nginx$ docker run -p 127.0.0.1:80:80 --network mynetwork --ip 172.18.0.2  --name nginx -v ~/docker/nginx/www:/www -v ~/docker/nginx/conf.d:/etc/nginx/conf.d  -v ~/docker/nginx/logs:/wwwlogs  -d nginx  

---解释挂载文件----
/etc/nginx/conf.d/ 中放入 vhost配置
/www 中放入网站文件

---解释参数---

-p 80:80：将容器的80端口映射到主机的80端口  172.18.0.2 为nginx的ip地址

--name mynginx：将容器命名为mynginx

-v ~/docker/nginx/www:/www：将主机中当前目录下的www挂载到容器的/www

-v ~/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf：将主机中当前目录下的nginx.conf挂载到容器的/etc/nginx/nginx.conf

-v ~/docker/nginx/logs:/wwwlogs：将主机中当前目录下的logs挂载到容器的/wwwlogs
</pre><p><strong>docker 镜像 和 docker 容器</strong></p><p><img src='https://jessexiaodong.github.io/images/docker/docker-images-container.png' alt='images container' referrerPolicy='no-referrer' /></p><h4><a name='header-n499' class='md-header-anchor '></a>客户端访问流程</h4><p><img src='https://jessexiaodong.github.io/images/docker/docker-flow-nginx.png' alt='docker architecture' referrerPolicy='no-referrer' /></p><p><img src='https://jessexiaodong.github.io/images/docker/index.html.png' alt='index.html' referrerPolicy='no-referrer' /></p><p><img src='https://jessexiaodong.github.io/images/docker/index.php.png' alt='index.php' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><hr /><h3><a name='header-n505' class='md-header-anchor '></a>- Docker Compose  快速创建WordPress</h3><blockquote><p>在<code>wordpress</code>目录下，新建<code>docker-compose.yml</code>文件。</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 44px; left: 75px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">./docker/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── docker_compose</span></pre><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│&nbsp;&nbsp; └── wordpress</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│&nbsp;&nbsp; &nbsp; &nbsp; └── docker-compose.yml</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre><blockquote><p>写入下面的内容</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell" style="page-break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 286px; left: 16px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> image: mysql:5.7</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> environment:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-</span> <span class="cm-def">MYSQL_ROOT_PASSWORD</span><span class="cm-operator">=</span><span class="cm-number">123456</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-</span> <span class="cm-def">MYSQL_DATABASE</span><span class="cm-operator">=</span>wordpress</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">web:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> image: wordpress</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> links:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-</span> mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> environment:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-</span> <span class="cm-def">WORDPRESS_DB_PASSWORD</span><span class="cm-operator">=</span><span class="cm-number">123456</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> ports:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-</span> <span class="cm-string">"127.0.0.1:8080:80"</span></span></pre><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> working_dir: /var/www/html</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> volumes:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-</span> wordpress:/var/www/html</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 352px;"></div><div class="CodeMirror-gutters" style="display: none; height: 352px;"></div></div></div></pre><blockquote><p>上面代码中，两个顶层标签表示有两个容器<code>mysql</code>和<code>web</code>。启动两个容器。</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">$ docker-compose up</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><blockquote><p>docker-compose up 后的容器</p></blockquote><p><img src='https://jessexiaodong.github.io/images/docker/docker-compose-workpress.png' alt='images container' referrerPolicy='no-referrer' /></p><blockquote><p>浏览器访问 <a href='http://127.0.0.1:8080' target='_blank' class='url'>http://127.0.0.1:8080</a>，应该就能看到 WordPress 的安装界面。</p></blockquote><p><img src='https://jessexiaodong.github.io/images/docker/workpress.png' alt='wordpress' referrerPolicy='no-referrer' /></p><blockquote><p>现在关闭两个容器。</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">$ docker-compose stop</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><blockquote><p>关闭以后，这两个容器文件还是存在的，写在里面的数据不会丢失。下次启动的时候，还可以复用。下面的命令可以把这两个容器文件删除（容器必须已经停止运行）。</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">$ docker-compose rm</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><hr /><h2><a name='header-n528' class='md-header-anchor '></a>@总结</h2><ul><li>使用docker 能大大加快开发和测试等工作，比如开发搭建某个项目的环境，将其镜像上传到仓库中。其他的开发人员就可以pull下镜像，无需在配置环境 ，再配合git ，简直不要太开心。</li><li>Docker容器化解锁Dev和Ops的潜力</li><li>适用于所有应用的现代平台</li></ul><div class='footnotes-area'  ><hr/>
<div class='footnote-line'><span class='md-fn-count'>1</span> [x] 这是一个 <em>努力</em> 的 <strong>程序员</strong> 。<a name='dfref-footnote-1' href='#ref-footnote-1' title='back to document' class='reversefootnote' >↩</a></div></div></div>
</body>
</html>